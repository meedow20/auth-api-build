{"version":3,"sources":["api/api.ts","reducers/constants/authReducerConstants.ts","reducers/authReducer.ts","components/Login/Login.tsx","components/Loader/Loader.tsx","components/Profile/Profile.tsx","App.tsx","index.tsx"],"names":["querySignInBody","values","email","password","SIGN_IN","SIGN_OUT","AuthContext","createContext","initialState","isLoading","isSignOut","userToken","authReducer","state","action","type","accessToken","init","Login","signIn","React","className","initialValues","onSubmit","setSubmitting","id","name","placeholder","Loader","Profile","signOut","useContext","useState","initialized","setInitialized","useEffect","a","axios","get","token","localStorage","getItem","headers","then","res","setItem","data","catch","err","alert","onClick","App","useReducer","dispatch","authContext","useMemo","post","removeItem","Provider","value","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e8bb010e.chunk.js","sourcesContent":["import {SignIn} from \"../types/SignIn\";\r\n\r\nexport const ozitagAuthApi = 'https://tager.dev.ozitag.com/api/auth/user';\r\n\r\nexport const querySignInBody = (values: SignIn) => {\r\n    return {\r\n        \"clientId\": 1,\r\n        \"email\": values.email,\r\n        \"password\": values.password\r\n    }\r\n}\r\n\r\nexport const profileApi = 'https://tager.dev.ozitag.com/api/tager/user/profile';\r\n\r\nexport function profileHeadersConfig(token: string | null) {\r\n    return {\r\n        headers: {\r\n            'Authorization': 'Bearer ' + token\r\n        }\r\n    }\r\n}","export const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_OUT = 'SIGN_OUT';","import {createContext} from 'react';\r\nimport {SIGN_IN, SIGN_OUT} from \"./constants/authReducerConstants\";\r\nimport {AuthState} from \"../types/AuthState\";\r\n\r\nexport const AuthContext = createContext({});\r\n\r\nexport const initialState: AuthState = {\r\n    isLoading: false,\r\n    isSignOut: true,\r\n    userToken: null\r\n}\r\n\r\nexport const authReducer = (state = initialState, action: any) => {\r\n    switch (action.type) {\r\n        case SIGN_IN:\r\n            return {\r\n                ...state,\r\n                isSignOut: false,\r\n                isLoading: true,\r\n                userToken: action.accessToken,\r\n            };\r\n        case SIGN_OUT:\r\n            return {\r\n                ...state,\r\n                isSignOut: true,\r\n                userToken: null,\r\n            };\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const init = (state: AuthState) => {\r\n    return state;\r\n}","import * as React from 'react';\r\nimport {Formik, Field, Form, FormikHelpers} from 'formik';\r\nimport {SignIn} from \"../../types/SignIn\";\r\nimport {AuthContext} from \"../../reducers/authReducer\";\r\nimport './styles/Login.css';\r\n\r\nexport const Login: React.FC = () => {\r\n    const {signIn}: any = React.useContext(AuthContext);\r\n\r\n    return (\r\n        <div className=\"loginContainer\">\r\n            <h1>Sign in</h1>\r\n            <Formik\r\n                initialValues={{\r\n                    email: '',\r\n                    password: '',\r\n                }}\r\n                onSubmit={(\r\n                    values: SignIn,\r\n                    {setSubmitting}: FormikHelpers<SignIn>\r\n                ) => {\r\n                    signIn(values);\r\n                    setSubmitting(false);\r\n                }}\r\n            >\r\n                <Form>\r\n                    <div className=\"inputContainer\">\r\n                        <Field\r\n                            id=\"email\"\r\n                            name=\"email\"\r\n                            placeholder=\"user@ozitag.com\"\r\n                            type=\"email\"\r\n                            className=\"emailInput\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"inputContainer\">\r\n                        <Field\r\n                            id=\"password\"\r\n                            name=\"password\"\r\n                            placeholder=\"user\"\r\n                            type=\"password\"\r\n                            className=\"passwordInput\"\r\n                        />\r\n                    </div>\r\n                    <button className=\"btnSubmit\" type=\"submit\">Submit</button>\r\n                </Form>\r\n            </Formik>\r\n        </div>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport './styles/Loader.css';\r\n\r\nexport function Loader() {\r\n    return (\r\n        <div className=\"loaderContainer\">\r\n            <span>Loading...</span>\r\n        </div>\r\n    );\r\n}","import React, {useState, useEffect} from 'react';\r\nimport {AuthContext} from \"../../reducers/authReducer\";\r\nimport axios from \"axios\";\r\nimport {profileApi, profileHeadersConfig} from \"../../api/api\";\r\nimport {Loader} from \"../Loader/Loader\";\r\nimport './styles/Profile.css';\r\n\r\nexport const Profile = () => {\r\n    const {signOut}: any = React.useContext(AuthContext);\r\n\r\n    const [initialized, setInitialized] = useState(false);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            axios.get(profileApi, profileHeadersConfig(localStorage.getItem('token')))\r\n                .then(res => {\r\n                    localStorage.setItem('profileName', res.data.data.name);\r\n                    setInitialized(true);\r\n                })\r\n                .catch((err) => alert(err))\r\n        })();\r\n    }, [])\r\n\r\n    if (!initialized) {\r\n        return (\r\n            <Loader/>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"profileContainer\">\r\n            <div className=\"usernameContainer\">\r\n                Username: {localStorage.getItem('profileName')}\r\n            </div>\r\n            <button className=\"btnLogout\" onClick={signOut}>\r\n                Logout\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n","import React, {useMemo, useReducer} from 'react';\nimport {SignIn} from \"./types/SignIn\";\nimport axios from \"axios\";\nimport {ozitagAuthApi, querySignInBody} from \"./api/api\";\nimport {authReducer, init, initialState} from \"./reducers/authReducer\";\nimport {SIGN_IN, SIGN_OUT} from \"./reducers/constants/authReducerConstants\";\nimport {AuthContext} from \"./reducers/authReducer\";\nimport {Login} from \"./components/Login/Login\";\nimport {Profile} from \"./components/Profile/Profile\";\n\nexport default function App() {\n    const [state, dispatch] = useReducer(authReducer, initialState, init);\n\n    const authContext = useMemo(() => ({\n        signIn: async (values: SignIn) => {\n            axios.post(ozitagAuthApi, querySignInBody(values))\n                .then(async res => {\n                    localStorage.setItem('token', res.data.data.accessToken);\n                    dispatch({\n                        type: SIGN_IN,\n                        accessToken: res.data.data.accessToken,\n                    })\n                })\n                .catch(() => alert('Invalid email or password'))\n        },\n        signOut: async () => {\n            localStorage.removeItem('token');\n            localStorage.removeItem('profileName');\n            dispatch({type: SIGN_OUT})\n        }\n    }), [])\n\n    return (\n        <AuthContext.Provider value={authContext}>\n            {localStorage.getItem('token') ?\n                <Profile/> :\n                <Login/>\n            }\n        </AuthContext.Provider>\n    );\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n    <App/>,\n    document.getElementById('root')\n);"],"sourceRoot":""}