(this["webpackJsonpauth-api"]=this["webpackJsonpauth-api"]||[]).push([[0],{54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),s=n.n(c),i=n(4),o=n.n(i),u=n(7),l=n(13),d=n(10),p=n.n(d),j=function(e){return{clientId:1,email:e.email,password:e.password}};var m=n(9),b="SIGN_IN",f="SIGN_OUT",h=Object(a.createContext)({}),O={isLoading:!1,isSignOut:!0,userToken:null},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(m.a)(Object(m.a)({},e),{},{isSignOut:!1,isLoading:!0,userToken:t.accessToken});case f:return Object(m.a)(Object(m.a)({},e),{},{isSignOut:!0,userToken:null});default:return e}},v=function(e){return e},x=n(8),w=(n(54),n(1)),k=function(){var e=a.useContext(h).signIn;return Object(w.jsxs)("div",{className:"loginContainer",children:[Object(w.jsx)("h1",{children:"Sign in"}),Object(w.jsx)(x.c,{initialValues:{email:"",password:""},onSubmit:function(t,n){var a=n.setSubmitting;e(t),a(!1)},children:Object(w.jsxs)(x.b,{children:[Object(w.jsx)("div",{className:"inputContainer",children:Object(w.jsx)(x.a,{id:"email",name:"email",placeholder:"user@ozitag.com",type:"email",className:"emailInput"})}),Object(w.jsx)("div",{className:"inputContainer",children:Object(w.jsx)(x.a,{id:"password",name:"password",placeholder:"user",type:"password",className:"passwordInput"})}),Object(w.jsx)("button",{className:"btnSubmit",type:"submit",children:"Submit"})]})})]})};n(56);function S(){return Object(w.jsx)("div",{className:"loaderContainer",children:Object(w.jsx)("span",{children:"Loading..."})})}n(57);var I=function(){var e=r.a.useContext(h).signOut,t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],s=n[1];return Object(a.useEffect)((function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.get("https://tager.dev.ozitag.com/api/tager/user/profile",(t=localStorage.getItem("token"),{headers:{Authorization:"Bearer "+t}})).then((function(e){localStorage.setItem("profileName",e.data.data.name),s(!0)})).catch((function(e){return alert(e)}));case 1:case"end":return e.stop()}var t}),e)})))()}),[]),c?Object(w.jsxs)("div",{className:"profileContainer",children:[Object(w.jsxs)("div",{className:"usernameContainer",children:["Username: ",localStorage.getItem("profileName")]}),Object(w.jsx)("button",{className:"btnLogout",onClick:e,children:"Logout"})]}):Object(w.jsx)(S,{})};function N(){var e=Object(a.useReducer)(g,O,v),t=Object(l.a)(e,2),n=(t[0],t[1]),r=Object(a.useMemo)((function(){return{signIn:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.post("https://tager.dev.ozitag.com/api/auth/user",j(t)).then(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("token",t.data.data.accessToken),n({type:b,accessToken:t.data.data.accessToken});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){return alert("Invalid email or password")}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("token"),localStorage.removeItem("profileName"),n({type:f});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}),[]);return Object(w.jsx)(h.Provider,{value:r,children:localStorage.getItem("token")?Object(w.jsx)(I,{}):Object(w.jsx)(k,{})})}s.a.render(Object(w.jsx)(N,{}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.e8bb010e.chunk.js.map